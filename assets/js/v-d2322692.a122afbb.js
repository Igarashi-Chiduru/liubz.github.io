"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9716],{4123:(e,s,a)=>{a.r(s),a.d(s,{data:()=>n});const n={key:"v-d2322692",path:"/zh/reference/plugin/git.html",title:"git",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"安装",slug:"安装",children:[]},{level:2,title:"Git 仓库",slug:"git-仓库",children:[]},{level:2,title:"配置项",slug:"配置项",children:[{level:3,title:"createdTime",slug:"createdtime",children:[]},{level:3,title:"updatedTime",slug:"updatedtime",children:[]},{level:3,title:"contributors",slug:"contributors",children:[]}]},{level:2,title:"页面数据",slug:"页面数据",children:[{level:3,title:"git.createdTime",slug:"git-createdtime",children:[]},{level:3,title:"git.updatedTime",slug:"git-updatedtime",children:[]},{level:3,title:"git.contributors",slug:"git-contributors",children:[]}]}],filePathRelative:"zh/reference/plugin/git.md",git:{updatedTime:1636880153e3,contributors:[{name:"lbz",email:"905808069@qq.com",commits:1}]}}},3744:(e,s)=>{s.Z=(e,s)=>{for(const[a,n]of s)e[a]=n;return e}},1870:(e,s,a)=>{a.r(s),a.d(s,{default:()=>k});var n=a(6252);const l=(0,n._)("h1",{id:"git",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#git","aria-hidden":"true"},"#"),(0,n.Uk)(" git")],-1),t=(0,n._)("p",null,"该插件会收集你的页面的 Git 信息，包括创建和更新时间、贡献者等。",-1),p=(0,n.Uk)("默认主题的 "),r=(0,n.Uk)("lastUpdated"),i=(0,n.Uk)(" 和 "),o=(0,n.Uk)("contributors"),c=(0,n.Uk)(" 就是由该插件支持的。"),d=(0,n.uE)('<p>该插件主要用于开发主题，大部分情况下你不需要直接使用它。</p><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> 安装</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#D4D4D4;">npm i -D @vuepress/plugin-git@next</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><h2 id="git-仓库" tabindex="-1"><a class="header-anchor" href="#git-仓库" aria-hidden="true">#</a> Git 仓库</h2>',4),u=(0,n.Uk)("该插件要求你的项目在 "),D={href:"https://git-scm.com/book/en/Git-Basics-Getting-a-Git-Repository",target:"_blank",rel:"noopener noreferrer"},h=(0,n.Uk)("Git 仓库"),m=(0,n.Uk)(" 下，这样它才能从提交历史记录中收集信息。"),b=(0,n.Uk)("在构建站点时，你应该确保所有的提交记录是可以获取到的。举例来说， CI 工作流通常会在克隆你的仓库时添加 "),g={href:"https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt",target:"_blank",rel:"noopener noreferrer"},y=(0,n.Uk)("--depth 1"),C=(0,n.Uk)(" 参数来避免拉取全部的提交记录，因此你需要禁用这个功能，以便该插件在 CI 可以中正常使用。"),f=(0,n.uE)('<div class="custom-container warning"><p class="custom-container-title">注意</p><p>该插件会显著降低准备数据的速度，特别是在你的页面数量很多的时候。你可以考虑在 <code>dev</code> 模式下禁用该插件来获取更好的开发体验。</p></div><h2 id="配置项" tabindex="-1"><a class="header-anchor" href="#配置项" aria-hidden="true">#</a> 配置项</h2><h3 id="createdtime" tabindex="-1"><a class="header-anchor" href="#createdtime" aria-hidden="true">#</a> createdTime</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的创建时间。</p></li></ul><h3 id="updatedtime" tabindex="-1"><a class="header-anchor" href="#updatedtime" aria-hidden="true">#</a> updatedTime</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的更新时间。</p></li></ul><h3 id="contributors" tabindex="-1"><a class="header-anchor" href="#contributors" aria-hidden="true">#</a> contributors</h3><ul><li><p>类型： <code>boolean</code></p></li><li><p>默认值： <code>true</code></p></li><li><p>详情：</p><p>是否收集页面的贡献者。</p></li></ul><h2 id="页面数据" tabindex="-1"><a class="header-anchor" href="#页面数据" aria-hidden="true">#</a> 页面数据</h2><p>该插件会向页面数据中添加一个 <code>git</code> 字段。</p><p>在使用该插件后，可以在页面数据中获取该插件收集到的 Git 信息：</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">usePageData</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"><span style="color:#C586C0;">import</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">type</span><span style="color:#D4D4D4;"> { </span><span style="color:#9CDCFE;">GitPluginPageData</span><span style="color:#D4D4D4;"> } </span><span style="color:#C586C0;">from</span><span style="color:#D4D4D4;"> </span><span style="color:#CE9178;">&#39;@vuepress/client&#39;</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#C586C0;">export</span><span style="color:#D4D4D4;"> </span><span style="color:#C586C0;">default</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#DCDCAA;">setup</span><span style="color:#D4D4D4;">() {</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#569CD6;">const</span><span style="color:#D4D4D4;"> </span><span style="color:#4FC1FF;">page</span><span style="color:#D4D4D4;"> = </span><span style="color:#DCDCAA;">usePageData</span><span style="color:#D4D4D4;">&lt;</span><span style="color:#4EC9B0;">GitPluginPageData</span><span style="color:#D4D4D4;">&gt;()</span></span>\n<span class="line"><span style="color:#D4D4D4;">    </span><span style="color:#9CDCFE;">console</span><span style="color:#D4D4D4;">.</span><span style="color:#DCDCAA;">log</span><span style="color:#D4D4D4;">(</span><span style="color:#9CDCFE;">page</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">value</span><span style="color:#D4D4D4;">.</span><span style="color:#9CDCFE;">git</span><span style="color:#D4D4D4;">)</span></span>\n<span class="line"><span style="color:#D4D4D4;">  }</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="git-createdtime" tabindex="-1"><a class="header-anchor" href="#git-createdtime" aria-hidden="true">#</a> git.createdTime</h3><ul><li><p>类型： <code>number</code></p></li><li><p>详情：</p><p>页面第一次提交的 Unix 毫秒时间戳。</p></li></ul><h3 id="git-updatedtime" tabindex="-1"><a class="header-anchor" href="#git-updatedtime" aria-hidden="true">#</a> git.updatedTime</h3><ul><li><p>类型： <code>number</code></p></li><li><p>详情：</p><p>页面最后一次提交的 Unix 毫秒时间戳。</p></li></ul><h3 id="git-contributors" tabindex="-1"><a class="header-anchor" href="#git-contributors" aria-hidden="true">#</a> git.contributors</h3><ul><li>类型： <code>GitContributor[]</code></li></ul><div class="language-typescript ext-ts line-numbers-mode"><pre class="shiki" style="background-color:#1E1E1E;"><code><span class="line"><span style="color:#569CD6;">interface</span><span style="color:#D4D4D4;"> </span><span style="color:#4EC9B0;">GitContributor</span><span style="color:#D4D4D4;"> {</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">name</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">email</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">string</span></span>\n<span class="line"><span style="color:#D4D4D4;">  </span><span style="color:#9CDCFE;">commits</span><span style="color:#D4D4D4;">: </span><span style="color:#4EC9B0;">number</span></span>\n<span class="line"><span style="color:#D4D4D4;">}</span></span>\n<span class="line"></span></code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>详情：</p><p>页面的贡献者信息。</p></li></ul>',20),v={},k=(0,a(3744).Z)(v,[["render",function(e,s){const a=(0,n.up)("NpmBadge"),v=(0,n.up)("RouterLink"),k=(0,n.up)("OutboundLink");return(0,n.wg)(),(0,n.iD)(n.HY,null,[l,(0,n.Wm)(a,{package:"@vuepress/plugin-git"}),t,(0,n._)("p",null,[p,(0,n.Wm)(v,{to:"/zh/reference/default-theme/config.html#lastupdated"},{default:(0,n.w5)((()=>[r])),_:1}),i,(0,n.Wm)(v,{to:"/zh/reference/default-theme/config.html#contributors"},{default:(0,n.w5)((()=>[o])),_:1}),c]),d,(0,n._)("p",null,[u,(0,n._)("a",D,[h,(0,n.Wm)(k)]),m]),(0,n._)("p",null,[b,(0,n._)("a",g,[y,(0,n.Wm)(k)]),C]),f],64)}]])}}]);